# Test Environment Configuration
# Copy this file to .env.test and update values as needed

# ==========================================
# DATABASE CONFIGURATION (Test Database)
# ==========================================
# CRITICAL: Use separate test database to prevent polluting development data
TEST_DATABASE_NAME=omnivore_test
TEST_DATABASE_HOST=localhost
TEST_DATABASE_PORT=5432
TEST_DATABASE_USER=app_user
TEST_DATABASE_PASSWORD=

# ==========================================
# REDIS CONFIGURATION (Test Redis)
# ==========================================
# Recommended: Use separate Redis database number for tests (0-15)
REDIS_URL=redis://localhost:6379/1
# Or use separate Redis instance:
# TEST_REDIS_HOST=localhost
# TEST_REDIS_PORT=6380

# ==========================================
# AUTHENTICATION & SECURITY
# ==========================================
# Use test credentials (NOT production values)
JWT_SECRET=test-jwt-secret-change-me
JWT_EXPIRATION=24h

# Google OAuth (Test Credentials)
GOOGLE_CLIENT_ID=test-google-client-id
GOOGLE_CLIENT_SECRET=test-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:4001/api/v2/auth/google/callback

# ==========================================
# APPLICATION SETTINGS
# ==========================================
NODE_ENV=test
PORT=4001
API_BASE_URL=http://localhost:4001

# ==========================================
# LOGGING
# ==========================================
# Reduce log noise during tests
LOG_LEVEL=error
ENABLE_QUERY_LOGGING=false

# ==========================================
# QUEUE & BACKGROUND JOBS
# ==========================================
# Use lower concurrency for tests
QUEUE_WORKER_CONCURRENCY=1
QUEUE_JOB_ATTEMPTS=1

# ==========================================
# CONTENT PROCESSING (Test Settings)
# ==========================================
# Use faster/simpler settings for tests
CONTENT_FETCH_TIMEOUT=5000
MAX_CONTENT_SIZE=1048576

# ==========================================
# NOTES FOR DEVELOPERS
# ==========================================
# 1. Never commit .env.test with real credentials
# 2. Run migrations before tests: TEST_DATABASE_NAME=omnivore_test npm run migration:run
# 3. Create test database: psql -U postgres -c "CREATE DATABASE omnivore_test;"
# 4. See TESTING.md for complete setup instructions
